# connect流程
这里默认mapStateToProps，mapDispatchToProps都是function
```js
export default connect(
  mapStateToProps,
  mapDispatchToProps
)(Todo)
```

### 1. 调用connect，connect/connect.js
介绍下面结构，用到了解构赋值，是一个科里化函数，={}这个不是多余的，否则当()传空的时候，就会报错
```js
var otherFunction = function(){ console.log('finished') }
export function createConnect( {a = 10}={} ) {
  console.log(arguments)
  return function connect( {pure = true, connectHOC=otherFunction}={} ) {
    return connectHOC()
  }
}

createConnect()()
//  finished
```
其实我们调用的就是：connectHOC()

### 2.分析传入mapStateToProps，mapDispatchToProps后的一些参数
```js
export function createConnect({
  /*  一些准备好的工具函数，在connect中调用  */
  connectHOC = connectAdvanced,
  mapStateToPropsFactories = defaultMapStateToPropsFactories,
  mapDispatchToPropsFactories = defaultMapDispatchToPropsFactories,
  mergePropsFactories = defaultMergePropsFactories,
  selectorFactory = defaultSelectorFactory
} = {}) {

  return function connect(
    mapStateToProps,
    mapDispatchToProps,
    mergeProps,
    /*...*/
  ) {
    
    const initMapStateToProps = match(mapStateToProps, mapStateToPropsFactories, 'mapStateToProps')
    const initMapDispatchToProps = match(mapDispatchToProps, mapDispatchToPropsFactories, 'mapDispatchToProps')
    const initMergeProps = match(mergeProps, mergePropsFactories, 'mergeProps')

    return connectHOC(selectorFactory, {
      // used in error messages
      methodName: 'connect',
      getDisplayName: name => `Connect(${name})`,
      shouldHandleStateChanges: Boolean(mapStateToProps),
      initMapStateToProps,
      initMapDispatchToProps,
      initMergeProps,
      pure,
      areStatesEqual,
      areOwnPropsEqual,
      areStatePropsEqual,
      areMergedPropsEqual,
      ...extraOptions
    })
  }

}
```